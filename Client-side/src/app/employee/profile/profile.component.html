<div class="container">
  <nz-card>
      <div class="row align-items-center">
          <div class="col-md-7">
              <div class="d-md-flex align-items-center">
                  <div class="text-center text-sm-left ">
                    <div class="clearfix">
                      <nz-upload
                          nzAction="http://localhost:3000/api/employees/{{userId}}/avatar"
                          nzListType="picture-card"
                          [(nzFileList)]="fileList"
                          [nzShowButton]="fileList.length < 1"
                          [nzPreview]="handlePreview">
                          <i nz-icon nzType="plus"></i>
                          <div class="ant-upload-text">Upload</div>
                      </nz-upload>
                      <nz-modal [nzVisible]="previewVisible" [nzContent]="modalContent" [nzFooter]="null" (nzOnCancel)="previewVisible=false">
                          <ng-template #modalContent>
                              <img [src]="previewImage" [ngStyle]="{ 'width': '100%' }" />
                          </ng-template>
                      </nz-modal>
                  </div>
                  </div>
                  <div class="text-center text-sm-left m-v-15 p-l-30">
                      <h2 class="m-b-5">{{fname}} {{lname}}</h2>
                      <p class="text-opacity font-size-13">@{{fname}}</p>
                      <p class="text-dark m-b-20">{{role}}</p>

                      <!-- <nz-upload nzAction="https://jsonplaceholder.typicode.com/posts/">
                        <button nz-button>
                            <i nz-icon nzType="upload"></i><span>Upload Profile</span>
                        </button>
                    </nz-upload> -->
                  </div>
              </div>
          </div>
          <div class="col-md-5">
              <div class="row">
                  <div class="d-md-block d-none border-left col-1"></div>
                  <div class="col">
                      <ul class="list-unstyled m-t-10">
                          <li class="row">
                              <p class="col-sm-3 col-4 font-weight-semibold text-dark m-b-5">
                                  <i class="m-r-10 text-primary" nz-icon nzType="mail" theme="outline"></i>
                                  <span>Email: </span>
                              </p>
                              <p class="col font-weight-semibold">{{email}}</p>
                          </li>
                          <li class="row">
                              <p class="col-sm-3 col-4 font-weight-semibold text-dark m-b-5">
                                  <i class="m-r-10 text-primary" nz-icon nzType="phone" theme="outline"></i>
                                  <span>Phone: </span>
                              </p>
                              <p class="col font-weight-semibold">{{phone}}</p>
                          </li>
                          <li class="row">
                              <p class="col-sm-3 col-5 font-weight-semibold text-dark m-b-5">
                                  <i class="m-r-10 text-primary" nz-icon nzType="compass" theme="outline"></i>
                                  <span>City: </span>
                              </p>
                              <p class="col font-weight-semibold">{{location}}</p>
                          </li>
                      </ul>
                      <!-- <div class="d-flex font-size-22">
                          <a href="" class="text-gray p-r-20">
                              <i nz-icon nzType="facebook" theme="outline"></i>
                          </a>
                          <a href="" class="text-gray p-r-20">
                              <i nz-icon nzType="twitter" theme="outline"></i>
                          </a>
                          <a href="" class="text-gray p-r-20">
                              <i nz-icon nzType="behance" theme="outline"></i>
                          </a>
                          <a href="" class="text-gray p-r-20">
                              <i nz-icon nzType="dribbble" theme="outline"></i>
                          </a>
                      </div> -->
                  </div>
              </div>
          </div>
      </div>
  </nz-card>

  <nz-tabset>
    <nz-tab nzTitle="Account">
      <div class="container">
        <nz-card nzTitle="Basic Infomation">
          <form nz-form [formGroup]="RegistrationForm" (ngSubmit)="updateEmployeeDetails(this.RegistrationForm.value)">
            <nz-alert *ngIf="errMessage" class="m-b-15" nzType="error" nzMessage={{errMessage}} nzShowIcon></nz-alert>
            <div class="row">
              <div class="col-md-6">
                  <nz-form-item>
                    <nz-form-label nzRequired nzFor="firstname">First Name</nz-form-label>
                    <nz-form-control nzHasFeedback [nzErrorTip]="fnameErrorTp">
                      <nz-input-group>
                        <input type="text" nz-input formControlName="firstname" placeholder="First Name">
                      </nz-input-group>
                      <ng-template #fnameErrorTp let-control>
                        <ng-container *ngIf="control.hasError('required')">
                          Please input your First Name!
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
              </div>
              <div class="col-md-6">
                  <nz-form-item>
                    <nz-form-label nzRequired nzFor="lastname">Last Name</nz-form-label>
                    <nz-form-control nzHasFeedback [nzErrorTip]="lnameErrorTp">
                        <nz-input-group>
                          <input type="text" nz-input formControlName="lastname" placeholder="Last Name">
                        </nz-input-group>
                        <ng-template #lnameErrorTp let-control>
                          <ng-container *ngIf="control.hasError('required')">
                            Please input your First Name!
                          </ng-container>
                        </ng-template>
                    </nz-form-control>
                  </nz-form-item>
              </div>
            </div>
          <div class="row">
            <div class="col-md-6">
                <nz-form-item>
                  <nz-form-label nzRequired nzFor="email">Email</nz-form-label>
                  <nz-form-control  nzHasFeedback [nzErrorTip]="emailErrorTp">
                    <nz-input-group>
                      <input type="text" nz-input formControlName="email" placeholder="Email">
                    </nz-input-group>
                    <ng-template #emailErrorTp let-control>
                      <ng-container *ngIf="control.hasError('email')">
                        The input is not valid E-mail!
                      </ng-container>
                      <ng-container *ngIf="control.hasError('required')">
                        Please input your E-mail!
                      </ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
            </div>
            <div class="col-md-6">
                <nz-form-item>
                  <nz-form-label nzRequired nzFor="phone">Phone No.</nz-form-label>
                  <nz-form-control nzHasFeedback [nzErrorTip]="phoneErrorTp" >

                    <nz-input-group [nzAddOnBefore]="addOnBeforeTemplate">
                      <ng-template #addOnBeforeTemplate>
                          <nz-select formControlName="phonePrefix" style="width: 70px;">
                           <nz-option nzLabel="+1" nzValue="+1"></nz-option>
                          </nz-select>
                      </ng-template>
                      <input formControlName="phone" id="'phone'" nz-input>
                    </nz-input-group>
                    <ng-template #phoneErrorTp let-control>
                      <ng-container *ngIf="control.hasError('required')">
                        Please input your phone number!
                      </ng-container>
                      <!-- <ng-container *ngIf="control.hasError('pattern')">
                        Please input a valid phone number!
                      </ng-container> -->
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <nz-form-item>
                <nz-form-label nzRequired nzFor="address">Street.</nz-form-label>
                <nz-form-control nzHasFeedback [nzErrorTip]="addressErrorTp">
                  <nz-input-group>
                    <input type="text" nz-input formControlName="street" placeholder="eg. 777 Brockton Avenue">
                  </nz-input-group>
                  <ng-template #addressErrorTp let-control>
                    <ng-container *ngIf="control.hasError('required')">
                      Please enter the street.!
                    </ng-container>
                  </ng-template>
                </nz-form-control>
              </nz-form-item>
           </div>
           <div class="col-md-3">
            <nz-form-item>
              <nz-form-label nzRequired nzFor="address">City</nz-form-label>
              <nz-form-control nzHasFeedback [nzErrorTip]="addressErrorTp">
                <nz-input-group>
                  <input type="text" nz-input formControlName="city" placeholder="eg. Abington">
                </nz-input-group>
                <ng-template #addressErrorTp let-control>
                  <ng-container *ngIf="control.hasError('required')">
                    Please enter the city!
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
           </div>
           <div class="col-md-3">
            <nz-form-item>
              <nz-form-label nzRequired nzFor="address">State</nz-form-label>
              <nz-form-control nzHasFeedback [nzErrorTip]="addressErrorTp">
                <nz-input-group>
                  <input type="text" nz-input formControlName="state" placeholder="eg. MA">
                </nz-input-group>
                <ng-template #addressErrorTp let-control>
                  <ng-container *ngIf="control.hasError('required')">
                    Please enter the state!
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
           </div>
           <div class="col-md-3">
            <nz-form-item>
              <nz-form-label nzRequired nzFor="address">Zip Code</nz-form-label>
              <nz-form-control nzHasFeedback [nzErrorTip]="addressErrorTp">
                <nz-input-group>
                  <input type="text" nz-input formControlName="zipCode" placeholder="zip code">
                </nz-input-group>
                <ng-template #addressErrorTp let-control>
                  <ng-container *ngIf="control.hasError('required')">
                    Please enter the zip code!
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
           </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <nz-form-item>
              <nz-form-label nzRequired nzFor="title">Job Title</nz-form-label>
              <nz-form-control  nzHasFeedback [nzErrorTip]="jobErrorTp">
                <nz-select id="title" formControlName="jobTitle" nzPlaceHolder="Select Job Title">
                  <nz-option nzValue="SUPERVISOR" nzLabel="SUPERVISOR"></nz-option>
                  <nz-option nzValue="TECHNICIAN" nzLabel="TECHNICIAN"></nz-option>
                </nz-select>
                <ng-template #jobErrorTp let-control>
                  <ng-container *ngIf="control.hasError('required')">
                    Please select job title!
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
        </div>
        </div>
       <div class="row">
         <nz-form-item>
           <nz-form-control class="pull-right">
            <button nz-button [disabled]="loading" nzType="primary">
              Update
              <nz-spin [nzSpinning]="loading"></nz-spin>
            </button>
           </nz-form-control>
         </nz-form-item>
       </div>
          </form>

        </nz-card>
    </div>
    </nz-tab>
    <nz-tab nzTitle="Change Password">
      <nz-card nzTitle="Change Password">
        <form nz-form [formGroup]="changePWForm" (ngSubmit)="changePassword()">
          <nz-alert *ngIf="errMessage" class="m-b-15" nzType="error" nzMessage={{errMessage}} nzShowIcon></nz-alert>
            <div class="row">
                <div class="col-md-3">
                    <nz-form-item>
                        <nz-form-label nzFor="oldPassword">Old Password</nz-form-label>
                        <nz-form-control>
                            <input formControlName="oldPassword" nz-input type="password" placeholder="Old Password">
                            <nz-form-explain *ngIf="changePWForm.get('oldPassword').dirty && changePWForm.get('oldPassword').errors">Please input your old password!</nz-form-explain>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div class="col-md-3">
                     <nz-form-item>
                        <nz-form-label nzFor="newPassword">New Password</nz-form-label>
                        <nz-form-control>
                            <input formControlName="newPassword" nz-input type="password" placeholder="New Password">
                            <nz-form-explain *ngIf="changePWForm.get('newPassword').dirty && changePWForm.get('newPassword').errors">Please input your New Password!</nz-form-explain>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div class="col-md-3">
                    <nz-form-item>
                        <nz-form-label nzFor="confirmPassword">Confirm</nz-form-label>
                        <nz-form-control>
                            <input formControlName="confirmPassword" nz-input type="password" placeholder="Confirm Password">
                            <nz-form-explain *ngIf="changePWForm.get('confirmPassword').dirty && changePWForm.get('confirmPassword').errors">Please confirm your New Password!</nz-form-explain>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div class="col-md-3">
                    <nz-form-item>
                        <nz-form-control>
                            <button class="m-t-40" nz-button nzType="primary" [disabled]="!changePWForm.valid">Change</button>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>
        </form>
    </nz-card>
    </nz-tab>
  </nz-tabset>
</div>
